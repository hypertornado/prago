{{define "admin_tasks"}}
    <div class="admin_box">
        <h1>{{message .locale "tasks"}}</h1>
        <div class="admin_box_content">
            <div class="taskmonitorcontainer">{{template "taskmonitor" .}}</div>

            {{$token := .csrf_token}}
            {{$locale := .locale}}

            <h2>{{message .locale "tasks_run"}}</h2>

            {{range $group := .tasks}}
                <h3>{{$group.Name}}</h3>
                <div class="task_group">
                    {{range $task := $group.Tasks}}
                        <div class="task">
                            <div class="task_name">{{$task.Name}}</div>
                            <form method="POST" action="api/tasks/runtask" enctype="multipart/form-data">
                                {{range $file := $task.Files}}
                                    <div class="task_input">
                                        <div>{{$file.ID}}</div>
                                        <div>
                                            <input type="file" name="{{$file.ID}}" multiple>
                                        </div>
                                    </div>
                                {{end}}

                                <input type="hidden" name="id" value="{{$task.ID}}">
                                <input type="hidden" name="csrf" value="{{$token}}">
                                <input type="submit" value="â–¶" class="btn btn-small">
                            </form>
                        </div>
                    {{end}}
                </div>
            {{end}}
        </div>
    </div>
{{end}}