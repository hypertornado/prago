{{define "admin_list"}}

<h2>{{call .admin_resource.Name .locale}}</h2>

{{$adminResource := .admin_resource }}
{{$locale := .locale}}

{{$csrfToken := ._csrfToken}}
{{$table := .admin_list_table_data}}

{{if $table.HasNew}}
  <a href="{{.admin_resource.ID}}/new" class="btn">{{message .locale "admin_new"}}</a>
{{end}}

<table class="admin_table{{if .admin_list_table_data.Order}} admin_table-order{{end}}">
  <tr class="admin_table_header">
  {{range $item := .admin_list_table_data.Header}}
    <th>{{$item.NameHuman}}</th>
  {{end}}
  <th></th>
  {{if $table.HasDelete}}<th></th>{{end}}
  </tr>
{{range $item := .admin_list_table_data.Rows}}
  <tr data-id="{{$item.ID}}" class="admin_table_row">
    {{range $cell := $item.Items}}
    <td>
      {{ tmpl $cell.TemplateName $cell.Value }}
    </td>
    {{end}}
    <td nowrap>
      <a href="{{ $adminResource.ID}}/{{$item.ID}}" class="btn">{{message $locale "admin_edit"}}</a> 
    </td>
    {{if $table.HasDelete}}
      <td nowrap>
        <form method="POST" action="{{ $adminResource.ID}}/{{$item.ID}}/delete?_csrfToken={{$csrfToken}}" onsubmit="return window.confirm('{{message $locale "admin_delete_confirmation"}}');">
          <input type="submit" value="{{message $locale "admin_delete"}}" class="btn">
        </form>
      </td>
    {{end}}
  </tr>
{{end}}
</table>

<div class="pagination">
{{range $page := .admin_list_table_data.Pagination.Pages}}
  {{if $page.Current}}
    <span class="pagination_page pagination_page-current">{{$page.Name}}</span>
  {{else}}
    <a href="{{$page.Url}}" class="pagination_page">{{$page.Name}}</a>
  {{end}}
{{end}}
</div>

{{end}}